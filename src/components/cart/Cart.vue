<template>
  <section>
    <CartItem
      :items="this.items"
      @emptyCart="cartReset"
      @changeCartSumm="getCartSumm"
    />
    <a
      href="#"
      v-if="cartVisible"
      @click="cartReset"
      class="btn btn-outline-danger w-100"
      >–£–¥–∞–ª–∏—Ç—å –≤—Å—ë –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã</a
    >
    <div
      v-if="cartVisible"
      class="card bg-success text-white mb-4 mt-4 shadow-sm"
    >
      <div class="card-header">–û–±—â–∞—è —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞</div>
      <div class="card-body fs-3">
        <span class="v-price">{{ cartSumm }}</span> <small>&#8381;</small>
      </div>
    </div>
  </section>
</template>

<script>
import CartItem from "./CartItem.vue";

export default {
  data() {
    return {
      cartVisible: true,
      cartSumm: 0,
      items: [
        {
          name: "–í–∏–¥–µ–æ–∫–∞—Ä—Ç–∞ ASUS TUF Gaming GeForce GTX 1650 OC 4 GB",
          price: 17500,
          img: "img/good-1.jpg",
          id: "aaa",
          count: 1,
        },
        {
          name: "–í–∏–¥–µ–æ–∫–∞—Ä—Ç–∞ GIGABYTE GeForce GTX 1660 SUPER OC 6G",
          price: 49990,
          img: "img/good-2.jpg",
          id: "bbb",
          count: 1,
        },
        {
          name: "–í–∏–¥–µ–æ–∫–∞—Ä—Ç–∞ MSI GeForce GTX 1660 VENTUS XS 6G OC",
          price: 40598,
          img: "img/good-3.jpg",
          id: "ccc",
          count: 1,
        },
        {
          name: "–í–∏–¥–µ–æ–∫–∞—Ä—Ç–∞ ASUS Cerberus GeForce GTX 1050 Ti Advanced 4GB",
          price: 17390,
          img: "img/good-4.jpg",
          id: "ddd",
          count: 1,
        },
      ],
    };
  },
  components: { CartItem },
  methods: {
    cartReset() {
      this.items = [];
      document.querySelector(".cart-list").innerHTML =
        "–≠–π –º–∞–π–Ω–µ—Ä, —Ç–≤–æ—è –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞ üò™";
      this.cartVisible = false;
    },
    getCartSumm() {
      this.cartSumm = 0;
      for (let i = 0; i < this.items.length; i++) {
        this.cartSumm += this.items[i].price * this.items[i].count;
      }
    },
  },
  mounted() {
    this.getCartSumm();
  },
};
</script>

<style module>
</style>