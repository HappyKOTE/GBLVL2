(()=>{"use strict";var e={705:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,i){"string"==typeof e&&(e=[[null,e,""]]);var s={};if(i)for(var r=0;r<this.length;r++){var o=this[r][0];null!=o&&(s[o]=!0)}for(var a=0;a<e.length;a++){var c=[].concat(e[a]);i&&s[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},913:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(705),s=n.n(i)()((function(e){return e[1]}));s.push([e.id,".good-img{height:150px;background-position:center;background-repeat:no-repeat;background-size:contain}.card-title{height:76px}.item-count{width:64px;text-align:center}.cart-list .good-img{background-position:center top}",""]);const r=s},379:(e,t,n)=>{var i,s=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),r=[];function o(e){for(var t=-1,n=0;n<r.length;n++)if(r[n].identifier===e){t=n;break}return t}function a(e,t){for(var n={},i=[],s=0;s<e.length;s++){var a=e[s],c=t.base?a[0]+t.base:a[0],d=n[c]||0,l="".concat(c," ").concat(d);n[c]=d+1;var h=o(l),u={css:a[1],media:a[2],sourceMap:a[3]};-1!==h?(r[h].references++,r[h].updater(u)):r.push({identifier:l,updater:f(u,t),references:1}),i.push(l)}return i}function c(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var r=n.nc;r&&(i.nonce=r)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var o=s(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var d,l=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function h(e,t,n,i){var s=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=l(t,s);else{var r=document.createTextNode(s),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(r,o[t]):e.appendChild(r)}}function u(e,t,n){var i=n.css,s=n.media,r=n.sourceMap;if(s?e.setAttribute("media",s):e.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var m=null,p=0;function f(e,t){var n,i,s;if(t.singleton){var r=p++;n=m||(m=c(t)),i=h.bind(null,n,r,!1),s=h.bind(null,n,r,!0)}else n=c(t),i=u.bind(null,n,t),s=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else s()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i));var n=a(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var s=o(n[i]);r[s].references--}for(var c=a(e,t),d=0;d<n.length;d++){var l=o(n[d]);0===r[l].references&&(r[l].updater(),r.splice(l,1))}n=c}}}}},t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={id:i,exports:{}};return e[i](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class t{constructor(t,n){e(this,"_text",""),e(this,"_callback",null),this._text=t,this._callback=n}onBtnClick(){const e=this._callback;"function"==typeof e&&e()}getTemplate(){const e=document.createElement("button");return e.classList.add("btn","btn-primary","w-100"),e}render(e){if(e){const t=this.getTemplate();t.innerHTML=this._text,e.appendChild(t),t.addEventListener("click",(()=>{this.onBtnClick()}))}}}var i=n(379),s=n.n(i),r=n(913);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}s()(r.Z,{insert:"head",singleton:!1}),r.Z.locals;class a extends t{getTemplate(){const e=document.createElement("button");return e.classList.add("position-absolute","top-0","end-0","btn-close","mt-2","me-2"),e}}class c extends t{getTemplate(){const e=document.createElement("button");return e.classList.add("btn","btn-outline-secondary"),e}}class d{constructor({name:e,price:t,img:n},i){o(this,"_name",""),o(this,"_price",0),o(this,"_img",""),o(this,"_CartInstane",null),this._name=e,this._price=t,this._img=n,this._CartInstane=i}addToCart(){this._CartInstane.add(this)}render(e){const n=document.createElement("div");n.classList.add("col-md-12","col-lg-6","mb-4"),n.innerHTML=`\n            <div class="card h-100 shadow-sm">\n                <div class="card-body">\n                    <div class="good-img" style="background-image: url(${this._img});"></div>\n                    <h5 class="card-title truncate" title="${this._name}">${this._name}</h5>\n                    <p class="card-text text-primary fw-bold">${this._price} —Ä—É–±.</p>\n                </div>\n            </div>\n            `;let i=n.querySelector(".card-body");new t("–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É",this.addToCart.bind(this)).render(i),e.appendChild(n)}}class l{constructor({name:e,price:t,img:n},i){o(this,"_name",""),o(this,"_price",0),o(this,"counter",1),o(this,"_img",""),o(this,"_CartInstance",null),this._name=e,this._price=t,this._img=n,this._CartInstance=i}removeFromCart(){this._CartInstance.remove()}countMinus(){this._CartInstance.add(this,-1)}countPlus(){this._CartInstance.add(this)}render(e){const t=document.createElement("div");t.classList.add("card","position-relative","mb-4","shadow-sm"),t.innerHTML=`\n            <div class="card-body cart-items">\n                <div class="row">\n                    <div class="col-3"><div class="good-img h-100" style="background-image: url(${this._img});"></div></div>\n                    <div class="col-8">\n                        <div class="fw-bold truncate" title="${this._name}">${this._name}</div>\n                        <div class="text-primary fw-bold mt-2 mb-2">${this._price} —Ä—É–±.</div>\n                        <div class="input-group input-group-sm"></div>\n                    </div>\n                </div>\n            </div>\n        `,new a("",this.removeFromCart.bind(this)).render(t);const n=t.querySelector(".input-group");new c("‚ûñ",this.countMinus.bind(this)).render(n);const i=document.createElement("div");i.classList.add("input-group-text"),i.innerHTML=`${this.counter}`,n.appendChild(i),new c("‚ûï",this.countPlus.bind(this)).render(n),e.appendChild(t)}}class h{constructor({placeholder:e,type:t,text:n,id:i}){o(this,"_placeholder",""),o(this,"_type",""),o(this,"_text",""),o(this,"_id",""),this._placeholder=e,this._type=t,this._text=n,this._id=i}validate(){const e=document.getElementById(this._id);e.addEventListener("change",(()=>{const t=e.value;let n=/./;n="name"===this._type?/^[A-Z–ê-–Ø]{1,32}$/i:"tel"===this._type?/^\+?(\d{1,3})?[- .]?\(?(?:\d{2,3})\)?[- .]?\d\d\d[- .]?\d\d\d\d$/:"email"===this._type&&/^[A-Z0-9._%+-]+@[A-Z0-9-]+.+.[A-Z]{2,4}$/i,n&&(t.match(n)?(e.classList.remove("is-invalid"),e.classList.add("is-valid"),console.log("–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –ø–æ–ª–µ: "+this._text)):(e.classList.remove("is-valid"),e.classList.add("is-invalid"),console.warn("–Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –ø–æ–ª–µ: "+this._text)))}))}render(){const e=document.querySelector(".modal-body");if(e){const t=document.createElement("form");t.classList.add("needs-validation"),t.innerHTML=`\n            <div class="form-floating mb-3">\n                <input type="${this._type}" class="form-control" id="${this._id}" placeholder="${this._placeholder}">\n                <label for="${this._id}">${this._text}</label>\n            </div>\n        `,e.appendChild(t)}}}const u=new class{constructor(){o(this,"_items",[])}add(e,t=1){const n=this._items.find((t=>t._name===e._name));n?n.counter+=t:this._items.push(new l({name:e._name,price:e._price,img:e._img},this)),this.render()}remove(){const e=this._items.findIndex((e=>e._name==this._items._name));this._items.splice(e,1),0==this._items.length?this.resetCart():this.render()}render(){const e=document.querySelector(".cart-list");e&&(e.innerHTML=""),this._items.forEach((t=>{t.render(e)})),new t("–°–±—Ä–æ—Å–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É",this.resetCart.bind(this)).render(e);let n=0;for(let e=0;e<this._items.length;e++)n+=this._items[e]._price*this._items[e].counter;const i=document.createElement("div");i.innerHTML=`\n        <div class="card bg-success text-white mb-4 mt-4 shadow-sm">\n            <div class="card-header">–û–±—â–∞—è —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞</div>\n            <div class="card-body fs-3">${n} —Ä—É–±.</div>\n        </div>\n        `,e.appendChild(i),renderTruncate()}resetCart(){this._items=[],this.render(),document.querySelector(".cart-list").innerHTML="–≠–π –º–∞–π–Ω–µ—Ä, —Ç–≤–æ—è –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞ üò™"}};function m(e,t,n){const i=function(e){const t=document.createElement("span");return t.style.whiteSpace="nowrap",t.className="temp",t.innerHTML=e,t}(`${e?"&nbsp;":""}${t}`);n.appendChild(i);const s=i.getBoundingClientRect().width;return n.removeChild(i),s}function p(e){return void 0!==e.dataset.thellipsisOriginalText}function f(e,t,n){const i=function(e){return p(e)?e.dataset.thellipsisOriginalText:e.innerText}(e),s=function(e,t,n,i){const s=e.split(" ");let r=[],o=0,a="";return s.forEach((function(e,c){var d;r.length>n?r[r.length-1]+=` ${e}`:(o+=m(0!=o,e,t),d={line_width:o,current_line:a,word:e,element:t},i&&(console.log("====================="),console.log("current_line: ",d.current_line),console.log("word: ",d.word),console.log("line_width: ",d.line_width),console.log("width: ",d.element.getBoundingClientRect().width),console.log("line_width >= width: ",d.line_width>=d.element.getBoundingClientRect().width),console.log("=====================")),o>=t.getBoundingClientRect().width&&(r.push(a),o=m(!1,e,t),a=""),a+=(""!=a?" ":"")+e,c==s.length-1&&r.push(a))})),r}(i,e,t,n);!function(e,t,n){const i=e.length-1,s=t-1;e.length>t&&(e[s]='<span style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis; width: '+parseInt(n)+'px; display: inline-block;">'+e[s],e[i]+="</span>")}(s,t,e.offsetWidth),p(e)||(e.dataset.thellipsisOriginalText=i),e.innerHTML=s.join(" ")}new class{constructor(e){o(this,"_items",[]),o(this,"_page",1),o(this,"_CartInstane",null),this._CartInstane=e,this.initShowMoreButton(),this.fetchGoods()}initShowMoreButton(){const e=document.querySelector("#showmore");e&&e.addEventListener("click",(()=>{this._page++,this.fetchGoods()}))}fetchGoods(){const e=`./api/items${this._page}.json`;return fetch(e).then((e=>e.json())).then((e=>{const t=e.data.map((e=>new d(e,this._CartInstane)));return this._items=[...this._items,...t],this._items})).then(this.render.bind(this)).catch((e=>{alert("–ë–æ–ª—å—à–µ —Å—Ç—Ä–∞–Ω–∏—Ü –Ω–µ—Ç"),document.querySelector("#showmore").classList.add("invisible")}))}render(){const e=document.querySelector(".goods-list");e&&(e.innerHTML="",this._items.forEach((t=>{t.render(e)}))),renderTruncate()}}(u),new class{fetchInputs(){return[{placeholder:"–ò–º—è —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã",type:"name",text:"–∏–º—è",id:"floatingName"},{placeholder:"–¢–µ–ª–µ—Ñ–æ–Ω –≤ —Ñ–æ—Ä–º–∞—Ç–µ +7(000)000-0000",type:"tel",text:"—Ç–µ–ª–µ—Ñ–æ–Ω",id:"floatingPhone"},{placeholder:"name@example.com",type:"email",text:"email",id:"floatingEmail"},{placeholder:"–±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏",type:"text",text:"–ø–∏—à–∏—Ç–µ —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ",id:"floatingOthers"}]}constructor(){o(this,"_inputs",[]);let e=this.fetchInputs();e=e.map((e=>new h(e))),this._inputs=e,this.render()}render(){this._inputs.forEach((e=>{e.render(),e.validate()}))}},window.onresize=()=>{renderTruncate()},window.renderTruncate=()=>{let e=document.querySelectorAll(".truncate");Array.prototype.forEach.call(e,(e=>{f(e,3,!1)}))},window.dispatchEvent(new Event("resize"))})()})();